PROJECT?=6lbr-demo

all: $(PROJECT)

CONTIKI?=../..

WITH_UIP6=1
UIP_CONF_IPV6=1
CFLAGS += -DUIP_CONF_IPV6=1

WITH_RPL?=1
ifneq ($(WITH_RPL),1)
UIP_CONF_RPL=0
CFLAGS += -DUIP_CONF_IPV6_RPL=0
endif

WITH_SHELL?=0
ifneq ($(WITH_SHELL),0)
CFLAGS += -DSHELL=1 -DCETIC_6LBR_TRACE_PING=1
APPS += serial-shell
PROJECT_SOURCEFILES += shell-6lbr.c 
endif

WITH_DELAY_IP?=0
ifneq ($(WITH_DELAY_IP), 0)
CFLAGS += -DSLIP_RADIO=1 -DWITH_DELAY_IP=1
endif

WITH_UDPCLIENT?=1
ifneq ($(WITH_UDPCLIENT),0)
CFLAGS += -DUDPCLIENT=1
PROJECT_SOURCEFILES += udp-client.c
else
CFLAGS += -DUDPCLIENT=0
endif

WITH_WEBSERVER?=1
ifneq ($(WITH_WEBSERVER),0)
CFLAGS += -DWEBSERVER=1
PROJECT_SOURCEFILES += sky-websense.c httpd-simple.c
endif

WITH_COAPSERVER?=0
ifneq ($(WITH_COAPSERVER),0)
WITH_COAP=13
CFLAGS += -DWITH_COAP=13
CFLAGS += -DREST=coap_rest_implementation
CFLAGS += -DUIP_CONF_TCP=0
APPS += er-coap-13
APPS += erbium
PROJECT_SOURCEFILES += er-example-server.c
endif

UDP_PERIOD?=5
ifneq ($(UDP_PERIOD),)
CFLAGS += -DCETIC_6LBR_UDP_PERIOD=$(UDP_PERIOD)
endif

WITH_UDP_CLIENT_AUTOSTART?=1
ifneq ($(WITH_UDP_CLIENT_AUTOSTART),0)
CFLAGS += -DUDP_CLIENT_AUTOSTART=1
endif

CETIC_6LBR_DISABLE_ACK?=0
CFLAGS +=-DCETIC_6LBR_DISABLE_ACK=$(CETIC_6LBR_DISABLE_ACK)

CFLAGS += -DPROJECT_CONF_H=\"project-conf.h\"

PROJECT_SOURCEFILES += 6lbr-demo-main.c 

include $(CONTIKI)/Makefile.include
